<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ZakaTech</title>
    <meta name="description" content="Analytics and decision support dashboard for Zakat institution administrators">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar / Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <h2>Zaka<span>Tech</span></h2>
                <p>Admin Dashboard</p>
            </div>
            <ul class="nav-links">
                <li class="active"><a href="#forecast">Collection Forecast</a></li>
                <li><a href="#segments">Donor Segmentation</a></li>
                <li><a href="#trends">Wealth Trends</a></li>
                <li><a href="#risk">At-Risk Donors</a></li>
                <li class="nav-divider"></li>
                <li><a href="#" class="nav-logout" id="logoutBtn">üö™ Logout</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header>
                <div class="header-left">
                    <h1>Amil Analytics Dashboard</h1>
                    <p class="date-display" id="currentDate">loading...</p>
                </div>
                <div class="header-actions">
                    <button class="btn-secondary" id="refreshData">üîÑ Refresh Data</button>
                    <button class="btn-export" id="exportBtn">üì• Export CSV</button>
                </div>
            </header>

            <!-- Key Metrics -->
            <section class="stats-grid admin-stats">
                <div class="card stat-card glow">
                    <h3>Total Donors</h3>
                    <p class="stat-number" id="totalDonors">--</p>
                    <span class="stat-change positive">Active database</span>
                </div>
                <div class="card stat-card glow">
                    <h3>Annual Forecast</h3>
                    <p class="stat-number" id="annualForecast">--</p>
                    <span class="stat-change">Projected collection</span>
                </div>
                <div class="card stat-card glow">
                    <h3>Avg. Per Donor</h3>
                    <p class="stat-number" id="avgPerDonor">--</p>
                    <span class="stat-change">Expected contribution</span>
                </div>
                <div class="card stat-card glow warning">
                    <h3>At-Risk Donors</h3>
                    <p class="stat-number" id="atRiskCount">--</p>
                    <span class="stat-change negative">Requires attention</span>
                </div>
            </section>

            <!-- Collection Forecasting Section -->
            <section class="forecast-section" id="forecast">
                <div class="card">
                    <div class="section-header">
                        <h2>üìä Collection Forecasting</h2>
                        <div class="period-toggle">
                            <button class="toggle-btn active" data-period="monthly">Monthly</button>
                            <button class="toggle-btn" data-period="quarterly">Quarterly</button>
                        </div>
                    </div>
                    <p class="section-desc">Projected Zakat collection based on donor data and ML predictions</p>

                    <div class="forecast-grid">
                        <div class="forecast-chart-container">
                            <canvas id="forecastChart"></canvas>
                        </div>
                        <div class="forecast-summary">
                            <div class="forecast-card">
                                <h4>This Month</h4>
                                <p class="forecast-value" id="thisMonthForecast">RM 0</p>
                            </div>
                            <div class="forecast-card">
                                <h4>This Quarter</h4>
                                <p class="forecast-value" id="thisQuarterForecast">RM 0</p>
                            </div>
                            <div class="forecast-card highlight">
                                <h4>Annual Projection</h4>
                                <p class="forecast-value" id="annualProjection">RM 0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Donor Segmentation Section -->
            <section class="segments-section" id="segments">
                <div class="cards-row">
                    <div class="card">
                        <h2>üë• Donor Segmentation</h2>
                        <p class="section-desc">Classification by contribution capacity</p>

                        <div class="segment-chart-container">
                            <canvas id="segmentChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h2>üìà Segment Analysis</h2>
                        <p class="section-desc">Detailed breakdown by tier</p>

                        <div class="segment-table-container">
                            <table class="data-table" id="segmentTable">
                                <thead>
                                    <tr>
                                        <th>Tier</th>
                                        <th>Count</th>
                                        <th>Total Zakat</th>
                                        <th>Avg. Wealth</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Wealth Trend Analysis Section -->
            <section class="trends-section" id="trends">
                <div class="card">
                    <h2>üìâ Wealth Trend Analysis</h2>
                    <p class="section-desc">Correlating income levels with Zakat contributions</p>

                    <div class="trend-controls">
                        <select id="trendType">
                            <option value="income">Income vs Zakat</option>
                            <option value="wealth">Total Wealth vs Zakat</option>
                        </select>
                    </div>

                    <div class="trend-chart-container">
                        <canvas id="trendChart"></canvas>
                    </div>

                    <div class="trend-insights">
                        <div class="insight-card">
                            <h4>Under-Contribution Detection</h4>
                            <p id="underContributionInsight">Analyzing patterns...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- At-Risk Donors Section -->
            <section class="risk-section" id="risk">
                <div class="card">
                    <div class="section-header">
                        <h2>‚ö†Ô∏è Risk Identification</h2>
                        <span class="risk-badge" id="riskBadge">0 donors flagged</span>
                    </div>
                    <p class="section-desc">High-income individuals with no recent payment history requiring
                        intervention</p>

                    <div class="risk-summary">
                        <div class="risk-stat">
                            <span class="risk-label">Potential Recovery</span>
                            <span class="risk-value" id="potentialRecovery">RM 0</span>
                        </div>
                    </div>

                    <div class="risk-table-container">
                        <table class="data-table risk-table" id="riskTable">
                            <thead>
                                <tr>
                                    <th>Donor ID</th>
                                    <th>Total Wealth</th>
                                    <th>Annual Income</th>
                                    <th>Tier</th>
                                    <th>Last Payment</th>
                                    <th>Days Overdue</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="admin-app.js"></script>
</body>

</html>